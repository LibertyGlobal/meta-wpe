From ce3172f35afc64836f7269099afac017385d69fe Mon Sep 17 00:00:00 2001
From: Bram Oosterhuis <mail@bybram.com>
Date: Sun, 28 Mar 2021 12:03:38 +0200
Subject: [PATCH] cmake: also find legacy libwpe

---
 cmake/FindWPE.cmake | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/cmake/FindWPE.cmake b/cmake/FindWPE.cmake
index a062481..32f24f2 100644
--- a/cmake/FindWPE.cmake
+++ b/cmake/FindWPE.cmake
@@ -29,7 +29,13 @@
 # ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 find_package(PkgConfig)
-pkg_check_modules(PC_WPE QUIET wpe-1.0)
+if(NOT PC_WPE_FOUND)
+pkg_search_module(PC_WPE wpe-1.0)
+endif()
+
+if(NOT PC_WPE_FOUND)
+pkg_search_module(PC_WPE wpe-0.2)
+endif()
 
 find_path(WPE_INCLUDE_DIRS
     NAMES wpe/wpe.h
@@ -37,7 +43,7 @@ find_path(WPE_INCLUDE_DIRS
 )
 
 find_library(WPE_LIBRARIES
-    NAMES wpe-1.0
+    NAMES ${PC_WPE_LIBRARIES}
     HINTS ${PC_WPE_LIBDIR} ${PC_WPE_LIBRARY_DIRS}
 )
 
-- 
2.25.1

